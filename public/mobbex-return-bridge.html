<!DOCTYPE html>
<html>
<head>
  <title>Procesando Pago</title>
  <style>
    body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f0f2f5; color: #333; }
    div { text-align: center; padding: 20px; border-radius: 8px; background-color: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #555; }
    p { margin-top: 15px; }
  </style>
</head>
<body>
  <div>
    <h1>Procesando tu pago...</h1>
    <p>Por favor espera, esta ventana se cerrará automáticamente.</p>
  </div>
  <script>
    const params = new URLSearchParams(window.location.search);
    const status = params.get('status');
    const type = params.get('type');
    const transactionId = params.get('transactionId');
    const total = params.get('total'); // Asumiendo que Mobbex también puede enviar el total
    const reference = params.get('reference'); // Asumiendo que Mobbex también puede enviar la referencia

    if (window.opener) {
      window.opener.postMessage({
        source: 'mobbex-payment',
        status: status,
        type: type,
        transactionId: transactionId,
        total: total,
        reference: reference
      }, '*'); // Reemplazar '*' con el origen de tu ventana principal en producción
    }
    window.close();
  </script>
</body>
</html> 